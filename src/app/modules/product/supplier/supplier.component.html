<h1 class="page-title">
    <span class="cm-mgr-5" i18n="@@listSupplierPageTitle">Danh sách nhà cung cấp</span>
    <small i18n="@@productModuleTitle">Quản lý sản phẩm</small>
</h1>
<div class="row">
    <div class="col-sm-12">
        <form class="form-inline " (ngSubmit)="search(1)">
            <div class="form-group cm-mgr-5">
                <ghm-input icon="dx-icon-search" i18n="@@keywordSearch" i18n-placeholder
                           placeholder="Nhà cung cấp."
                           name="searchInput" [(ngModel)]="keyword"></ghm-input>
            </div>
            <div class="form-group cm-mgr-5">
                <ghm-select
                    [width]="250"
                    [data]="[{id: false, name: 'Chưa kích hoạt'},{id: true, name: 'Kích hoạt'}]"
                    i18n="@@selectStatus"
                    i18n-title
                    [title]="'-- Chọn trạng thái --'"
                    [value]="isActive"
                    (itemSelected)="selectIsActive($event)"></ghm-select>
            </div>
            <div class="form-group">
                <button class="btn blue" type="submit">
                    <i class="dx-icon-search" *ngIf="!isSearching"></i>
                    <i class="fa fa-pulse fa-spinner" *ngIf="isSearching"></i>
                </button>
            </div>
            <div class="form-group cm-mgl-5">
                <button class="btn btn-light" type="button" (click)="resetFormSearch()">
                    <i class="dx-icon-refresh"></i>
                </button>
            </div>
            <div class="form-group pull-right">
                <button class="btn blue cm-mgr-5" *ngIf="permission.add" i18n="@@add" (click)="add()"
                        type="button">
                    Thêm
                </button>
            </div>
        </form>
    </div>
</div>


<!--<table class="table table-striped table-hover">-->
    <!--<thead>-->
    <!--<tr>-->
        <!--<th class="middle center w50" i18n="@@no">STT</th>-->
        <!--<th class="middle" i18n="@@supplier">Tên Nhà Cung Cấp</th>-->
        <!--<th class="middle" i18n="@@address">Địa Chỉ</th>-->
        <!--<th class="middle center" i18n="@@status">Trạng Thái</th>-->
        <!--<th class="middle text-right w150" i18n="@@action" *ngIf="permission.edit || permission.delete">Thao Tác</th>-->
    <!--</tr>-->
    <!--</thead>-->
    <!--<tbody>-->
    <!--<tr *ngFor="let item of listSupplier; let i = index"-->
        <!--nhContextMenuTrigger-->
        <!--[nhContextMenuTriggerFor]="nhMenu"-->
        <!--[nhContextMenuData]="item">-->
        <!--<td class="center middle">{{ (currentPage - 1) * pageSize + i + 1 }}</td>-->
        <!--<td class="middle">{{ item.name }}</td>-->
        <!--<td class="middle">-->
            <!--{{item.address}}-->
        <!--</td>-->
        <!--<td class="middle center">-->
            <!--<mat-checkbox color="primary" [checked]="item.isActive" (change)="updateStatus(item)"></mat-checkbox>-->
        <!--</td>-->
        <!--<td class="text-right middle" *ngIf="permission.edit || permission.delete">-->
            <!--<nh-dropdown>-->
                <!--<button type="button" class="btn btn-sm btn-light btn-no-background no-border" matTooltip="Menu">-->
                    <!--<mat-icon>more_horiz</mat-icon>-->
                <!--</button>-->
                <!--<ul class="nh-dropdown-menu right" role="menu">-->
                    <!--<li>-->
                        <!--<a *ngIf="permission.view"-->
                           <!--(click)="detail(item)" i18n="@@view">-->
                            <!--<i class="fa fa-eye"></i>-->
                            <!--Xem-->
                        <!--</a>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<a *ngIf="permission.edit"-->
                           <!--(click)="edit(item)" i18n="@@edit">-->
                            <!--<i class="fa fa-edit"></i>-->
                            <!--Sửa-->
                        <!--</a>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<a (click)="confirm(item)" i18n="@@delete">-->
                            <!--<i class="fa fa-trash"></i>-->
                            <!--Xóa-->
                        <!--</a>-->
                    <!--</li>-->
                <!--</ul>-->
            <!--</nh-dropdown>-->
        <!--</td>-->
    <!--</tr>-->
    <!--</tbody>-->
<!--</table>-->
<div class="row">
    <div class="col-sm-12">
        <dx-data-grid
            id="gridContainer"
            keyExpr="id"
            [allowColumnResizing]="true"
            [showRowLines]="true"
            [wordWrapEnabled]="true"
            [allowColumnReordering]="true"
            [columnAutoWidth]="true"
            [dataSource]="listSupplier"
            [noDataText]="'Không có dữ liệu'"
            (onContextMenuPreparing)="rightClickContextMenu($event)"
            [showBorders]="true">
            <dxo-filter-row [visible]="true"></dxo-filter-row>
            <dxo-scrolling mode="infinite"></dxo-scrolling>
            <dxo-header-filter [visible]="true"></dxo-header-filter>
            <dxi-column caption="STT" [width]="50" cellTemplate="NoTemplate" alignment="center" cssClass = "middle"></dxi-column>
            <div *dxTemplate="let data of 'NoTemplate'">
                {{ (currentPage - 1) * pageSize + data.rowIndex + 1 }}
            </div>
            <dxi-column dataField="name" caption="Tên thương hiệu" cssClass = "middle"></dxi-column>
            <dxi-column dataField="address" caption="Địa chỉ" cssClass = "middle"></dxi-column>
            <dxi-column dataField="isActive" type="boolean" [width]="120" caption="Trạng thái" alignment="center" cssClass = "middle">
                <dxo-header-filter [dataSource]="[
                                    {text: 'Kích hoạt', value: ['isActive', '=', true]},
                                    {text: 'Chưa kích hoạt', value: ['isActive', '=', false]}]"></dxo-header-filter>
            </dxi-column>
            <dxi-column cellTemplate="actionTemplate" [width]="100" caption="Thao tác" alignment="center"
                        *ngIf="permission.edit || permission.delete || permission.view" cssClass = "middle"></dxi-column>
            <div *dxTemplate="let cell of 'actionTemplate'" class="center middle">
                <a *ngIf="permission.view" class="cm-mgr-5"
                   i18n="@@view" title="Xem"
                   (click)="detail(cell.data)">
                    <i class="fa fa-info-circle color-bright-gray font-size-16"></i>
                </a>
                <a *ngIf="permission.edit" class="color-dark-blue text-decoration-none cm-mgr-5"
                   i18n="@@edit" title="Sửa"
                   (click)="edit(cell.data)">
                    <i class="dx-icon-edit"></i>
                </a>
                <a title="Xóa" [swal]="confirmDeleteSupplier"
                   class="color-red text-decoration-none" *ngIf="permission.delete"
                   (click)="confirm(cell.data)" i18n="@@delete">
                    <i class="dx-icon-remove"></i>
                </a>
            </div>
        </dx-data-grid>
    </div>
    <div class="cm-sm-12">
        <ghm-paging
            class="pull-right"
            [totalRows]="totalRows"
            [currentPage]="currentPage"
            [pageShow]="6"
            [pageSize]="pageSize"
            (pageClick)="search($event)"
            i18n="@@supplier" i18n-pageName
            (selectPage)="changePageSize($event)"
            [pageName]="'Nhà cung cấp'">
        </ghm-paging>
    </div>
</div>

<app-product-supplier-form (saveSuccessful)="search(1)"></app-product-supplier-form>
<app-product-supplier-detail></app-product-supplier-detail>

<swal
    #confirmDeleteSupplier
    i18n="@@confirmDeleteSupplier"
    i18n-title="@@confirmTitleDeleteSupplier"
    i18n-text="@@confirmTextDeleteSupplier"
    title="Bạn có muống xóa nhà cung cấp này?"
    text="Bạn không thể khôi phục nhà cung cấp này sau khi xóa."
    type="question"
    i18n-confirmButtonText="@@accept"
    i18n-cancelButtonText="@@cancel"
    confirmButtonText="Đồng ý"
    cancelButtonText="Hủy"
    [showCancelButton]="true"
    [focusCancel]="true">
</swal>

<!--<nh-menu #nhMenu>-->
    <!--<nh-menu-item (clicked)="detail($event)">-->
        <!--<i class="fa fa-eye"></i>-->
        <!--<span i18n="@@view">Xem </span>-->
    <!--</nh-menu-item>-->
    <!--<nh-menu-item (clicked)="edit($event)">-->
        <!--<i class="fa fa-edit"></i>-->
        <!--<span i18n="@@edit">Sửa</span>-->
    <!--</nh-menu-item>-->
    <!--<nh-menu-item *ngIf="permission.delete"-->
                  <!--(clicked)="confirm($event)">-->
        <!--<i class="fa fa-trash"></i>-->
        <!--<span i18n="@@edit">Xóa</span>-->
    <!--</nh-menu-item>-->
<!--</nh-menu>-->
