<div class="row cm-mgb-10 cm-mgt-10">
  <div class="col-sm-12">
    <form class="form-inline" (ngSubmit)="search(1)">
      <div class="form-group">
        <input type="text" class="form-control" placeholder="Nhập tiêu đề tin cần tìm."
               [(ngModel)]="keyword" name="keyword">
      </div>
      <div class="form-group">
        <!--<button class="btn btn-primary">-->
        <!--<i class="fas fa-search"></i>-->
        <!--</button>-->
        <ghm-button icon="fa fa-search"></ghm-button>
      </div>
    </form>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
    <table class="table table-bordered table-hover table-stripped">
      <thead>
      <tr>
        <th class="center middle w50">STT</th>
        <th class="center middle">Tên sản phẩm</th>
        <th class="center middle">Ảnh</th>
        <th class="center middle w250">Chuyên mục</th>
        <th class="center middle w150">Ngày tạo</th>
        <th class="center middle w100">Nổi bật</th>
        <th class="center middle w100">Trang chủ</th>
        <th class="center middle w100">Hành động</th>
      </tr>
      </thead>
      <tbody *ngIf="!isSearching">
      <tr *ngIf="totalRows === 0"><td colspan="8" class="center"><div class="">Không có dữ liệu</div></td></tr>
      <tr *ngFor="let item of listItems; let i = index"
          nhContextMenuTrigger
          [nhContextMenuTriggerFor]="nhMenu"
          [nhContextMenuData]="item.productId"
      >
        <td class="center middle">{{ (currentPage - 1) * pageSize + i + 1 }}</td>
        <td class="middle">{{ item.name }}</td>
        <td class="middle"><img ghmImage src="{{item.featureImage}}" [isUrlAbsolute]="true" class="media-object w50"
                                    alt="{{item.name}}">
        </td>
        <td>{{item.categoryViewModel}}</td>
        <td class="middle">{{ item.createTime | dateTimeFormat: 'DD/MM/YYYY HH:mm' }}</td>
        <td class="center middle">
          <mat-checkbox color="primary" (click)="updateHot(item.productId, !item.isHot)" [checked]="item.isHot"></mat-checkbox>
        </td>
        <td class="center middle">
          <mat-checkbox color="primary"  (click)="updateHomePage(item.productId, !item.isHomePage)" [checked]="item.isHomePage"></mat-checkbox>
        </td>
        <td class="center middle">
          <nh-dropdown *ngIf="permission.view || permission.edit || permission.delete">
            <button type="button" class="btn btn-sm btn-light btn-no-background no-border" matTooltip="Menu">
              <mat-icon>more_horiz</mat-icon>
            </button>
            <ul class="nh-dropdown-menu right" role="menu">
<!--              <li>-->
<!--                <a *ngIf="permission.view"-->
<!--                   (click)="detail(item.productId)" i18n="@@view">-->
<!--                  <i class="fa fa-eye"></i>-->
<!--                  View-->
<!--                </a>-->
<!--              </li>-->
              <li>
                <a *ngIf="permission.edit"
                   (click)="edit(item.productId)"
                   i18n="@@edit">
                  <i class="fa fa-edit"></i>
                  Edit
                </a>
              </li>
<!--              <li>-->
<!--                <a *ngIf="permission.delete" [swal]="confirmDeleteProduct"-->
<!--                   (confirm)="delete(item)" i18n="@@delete">-->
<!--                  <i class="fa fa-trash"></i>-->
<!--                  Delete-->
<!--                </a>-->
<!--              </li>-->
            </ul>
          </nh-dropdown>
        </td>
      </tr>
      </tbody>
      <tbody *ngIf="isSearching">
      <tr>
        <td colspan="8" class="center">
          <div class="spinner" *ngIf="isSearching">
            <div class="rect1"></div>
            <div class="rect2"></div>
            <div class="rect3"></div>
            <div class="rect4"></div>
            <div class="rect5"></div>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
    <ghm-paging [totalRows]="totalRows" [pageSize]="pageSize" [currentPage]="currentPage" [pageShow]="6"
                (pageClick)="search($event)"
                [isDisabled]="isSearching" i18n-pageName="@@news" pageName="News"></ghm-paging>
  </div>
</div>
<swal
        #confirmDeleteProduct
        i18n="@@confirmDeleteListProduct"
        i18n-title="@@confirmDeleteListProduct"
        i18n-text="@@confirmDeleteListProduct"
        title="Are you sure for delete this list product?"
        text="You can't recover this list product after delete."
        type="question"
        i18n-confirmButtonText="@@accept"
        i18n-cancelButtonText="@@cancel"
        confirmButtonText="Accept"
        cancelButtonText="Cancel"
        [showCancelButton]="true"
        [focusCancel]="true">
</swal>

<nh-menu #nhMenu>
<!--  <nh-menu-item (clicked)="detail($event)">-->
<!--    <i class="fa fa-eye"></i>-->
<!--    <span i18n="@@view">View</span>-->
<!--  </nh-menu-item>-->
  <nh-menu-item (clicked)="edit($event)">
    <i class="fa fa-edit"></i>
    <span i18n="@@edit">Edit</span>
  </nh-menu-item>
<!--  <nh-menu-item *ngIf="permission.delete"-->
<!--                (clicked)="delete($event)">-->
<!--    <i class="fa fa-edit"></i>-->
<!--    <span i18n="@@edit">Delete</span>-->
<!--  </nh-menu-item>-->
</nh-menu>
